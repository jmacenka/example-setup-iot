[{"id":"ef4e3e54.c20668","type":"tab","label":"SIEMENS Showcase","disabled":false,"info":""},{"id":"d072f8f0.4a4858","type":"comment","z":"ef4e3e54.c20668","name":"grafana-dashboard.yml","info":"{\n  \"annotations\": {\n    \"list\": [\n      {\n        \"builtIn\": 1,\n        \"datasource\": \"-- Grafana --\",\n        \"enable\": true,\n        \"hide\": true,\n        \"iconColor\": \"rgba(0, 211, 255, 1)\",\n        \"name\": \"Annotations & Alerts\",\n        \"type\": \"dashboard\"\n      }\n    ]\n  },\n  \"editable\": true,\n  \"gnetId\": null,\n  \"graphTooltip\": 0,\n  \"id\": 1,\n  \"links\": [],\n  \"panels\": [\n    {\n      \"aliasColors\": {},\n      \"bars\": false,\n      \"dashLength\": 10,\n      \"dashes\": false,\n      \"datasource\": \"InfluxDB\",\n      \"description\": \"A random MQTT Lux value taken from a public Mosquitto-MQTT-Broker.\",\n      \"fieldConfig\": {\n        \"defaults\": {\n          \"custom\": {},\n          \"unit\": \"lux\"\n        },\n        \"overrides\": []\n      },\n      \"fill\": 1,\n      \"fillGradient\": 0,\n      \"gridPos\": {\n        \"h\": 9,\n        \"w\": 12,\n        \"x\": 0,\n        \"y\": 0\n      },\n      \"hiddenSeries\": false,\n      \"id\": 2,\n      \"legend\": {\n        \"avg\": false,\n        \"current\": false,\n        \"max\": false,\n        \"min\": false,\n        \"show\": true,\n        \"total\": false,\n        \"values\": false\n      },\n      \"lines\": true,\n      \"linewidth\": 1,\n      \"nullPointMode\": \"null\",\n      \"options\": {\n        \"alertThreshold\": true\n      },\n      \"percentage\": false,\n      \"pluginVersion\": \"7.4.3\",\n      \"pointradius\": 2,\n      \"points\": false,\n      \"renderer\": \"flot\",\n      \"seriesOverrides\": [],\n      \"spaceLength\": 10,\n      \"stack\": false,\n      \"steppedLine\": false,\n      \"targets\": [\n        {\n          \"groupBy\": [\n            {\n              \"params\": [\n                \"$__interval\"\n              ],\n              \"type\": \"time\"\n            },\n            {\n              \"params\": [\n                \"none\"\n              ],\n              \"type\": \"fill\"\n            }\n          ],\n          \"measurement\": \"Lux\",\n          \"orderByTime\": \"ASC\",\n          \"policy\": \"default\",\n          \"queryType\": \"randomWalk\",\n          \"refId\": \"A\",\n          \"resultFormat\": \"time_series\",\n          \"select\": [\n            [\n              {\n                \"params\": [\n                  \"value\"\n                ],\n                \"type\": \"field\"\n              },\n              {\n                \"params\": [],\n                \"type\": \"mean\"\n              }\n            ]\n          ],\n          \"tags\": []\n        }\n      ],\n      \"thresholds\": [],\n      \"timeFrom\": null,\n      \"timeRegions\": [],\n      \"timeShift\": null,\n      \"title\": \"SIEMENS Showcase\",\n      \"tooltip\": {\n        \"shared\": true,\n        \"sort\": 0,\n        \"value_type\": \"individual\"\n      },\n      \"type\": \"graph\",\n      \"xaxis\": {\n        \"buckets\": null,\n        \"mode\": \"time\",\n        \"name\": null,\n        \"show\": true,\n        \"values\": []\n      },\n      \"yaxes\": [\n        {\n          \"format\": \"lux\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": \"0\",\n          \"show\": true\n        },\n        {\n          \"format\": \"short\",\n          \"label\": null,\n          \"logBase\": 1,\n          \"max\": null,\n          \"min\": null,\n          \"show\": true\n        }\n      ],\n      \"yaxis\": {\n        \"align\": false,\n        \"alignLevel\": null\n      }\n    }\n  ],\n  \"refresh\": \"5s\",\n  \"schemaVersion\": 27,\n  \"style\": \"dark\",\n  \"tags\": [],\n  \"templating\": {\n    \"list\": []\n  },\n  \"time\": {\n    \"from\": \"now-5m\",\n    \"to\": \"now\"\n  },\n  \"timepicker\": {},\n  \"timezone\": \"\",\n  \"title\": \"SIEMENS Showcase\",\n  \"uid\": \"82UcjByGk\",\n  \"version\": 1\n}","x":1100,"y":200,"wires":[]},{"id":"500117f2.714b78","type":"delay","z":"ef4e3e54.c20668","name":"max 1/h","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"day","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":880,"y":380,"wires":[["ff025e2c.2303b"]]},{"id":"5215f2db.016324","type":"comment","z":"ef4e3e54.c20668","name":"Colleclting machine data","info":"","x":170,"y":80,"wires":[]},{"id":"811422ed.763d","type":"comment","z":"ef4e3e54.c20668","name":"Converting data","info":"","x":560,"y":80,"wires":[]},{"id":"9103eec9.cad41","type":"comment","z":"ef4e3e54.c20668","name":"Generate SMS Notification","info":"","x":1110,"y":260,"wires":[]},{"id":"34546945.2418ee","type":"comment","z":"ef4e3e54.c20668","name":"Push data to time-series-db","info":"","x":1120,"y":80,"wires":[]},{"id":"b2cfe0a2.c6e6e","type":"mqtt in","z":"ef4e3e54.c20668","name":"","topic":"/merakimv/Q2FV-UA7G-39PY/light","qos":"0","datatype":"auto","broker":"dfced736.3da9c8","x":200,"y":160,"wires":[["29a135c6.238c6a","285bedc8.b51f9a"]]},{"id":"29a135c6.238c6a","type":"function","z":"ef4e3e54.c20668","name":"Convert JSON to influxDB and Alarm","func":"msg.payload = JSON.parse(msg.payload)\n\ndb_msg = {};\ndb_msg.measurement = \"Lux\";\ndb_msg.payload = msg.payload.lux;\n\nalarm_msg = {};\nalarm_msg.payload = \"Lichtst√§rke ist bei \" + msg.payload; + \" Lux.\"\n\nreturn [db_msg, alarm_msg];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":630,"y":160,"wires":[["9e7ec79f.1cba8","285bedc8.b51f9a"],["500117f2.714b78","f2aaa7b9.20039"]]},{"id":"9e7ec79f.1cba8","type":"influxdb out","z":"ef4e3e54.c20668","influxdb":"18f0abcb.5c122c","name":"","measurement":"","precision":"","retentionPolicy":"","x":1110,"y":140,"wires":[]},{"id":"285bedc8.b51f9a","type":"debug","z":"ef4e3e54.c20668","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":890,"y":60,"wires":[]},{"id":"f2aaa7b9.20039","type":"debug","z":"ef4e3e54.c20668","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":890,"y":240,"wires":[]},{"id":"ff025e2c.2303b","type":"twilio out","z":"ef4e3e54.c20668","twilio":"b02f4749.ab9588","twilioType":"sms","url":"","number":"+4915123579396","name":"SMS Notification to Jan","x":1110,"y":380,"wires":[]},{"id":"dfced736.3da9c8","type":"mqtt-broker","name":"Mosquitto","broker":"test.mosquitto.org","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"18f0abcb.5c122c","type":"influxdb","z":"ef4e3e54.c20668","hostname":"influxdb","port":"8086","protocol":"http","database":"mydb","name":"","usetls":false,"tls":"","influxdbVersion":"1.x"},{"id":"b02f4749.ab9588","type":"twilio-api","name":"Twilio API","sid":"AC6b61dadd89e5b390cce32c4f06ce6e9e","from":"+19549476183"}]